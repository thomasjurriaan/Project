# Design document

In dit document laat ik zien op welke manier ik de functies zal bewerkstelligen, die in de visualisatie, zoals omschreven in het proposal, aanwezig zijn. Het belangrijkste deel van de visualisatie is de bovenste, de kaart van Europa. Hiervoor gebruik ik Datamaps. Bewerking ervan is daardoor gemakkelijk te bereiken met D3. De functionaliteiten van de kaart zijn:
1. Staafdiagrammen die de in- en outflow weergeven voor een bepaald jaar
2. Klikken levert een aantal pijlen vanuit dat land naar andere landen
3. Klikken laat tevens een kleine grafiek zien van het verloop van import en export over de tijd. 

De genoemde punten voor de variabele *goederen en diensten* beschouw ik als het *minimal viable product*. Zonder de kleine grafiek geeft de visualisatie ook enig inzicht in de data, maar wat mij betreft niet voldoende. Om deze visualisatie te maken, wil ik de data hardcoded hebben. De totale import en export van Frankrijk wil ik bijvoorbeeld al hebben berekend, zodat er niet meer over de data heengeloopt hoeft te worden. Ik maak voor het *MVP* twee hoofddatabestanden. Eén is te gebruiken door de functie *drawBars(year)* die voor een bepaald jaar de barplots van alle landen toont. Deze is tevens te gebruiken voor de functie *showGraph(country)* die de kleine grafiek toont. Dit bestand is dus (under the hood) een driedimensionale array met daarin *Jaren*, *Landen* en *import of export*. In dit bestand (of een klein extra bestand) is ook aanwezig wanneer het land toetrad tot de Schengenzone (als het daarin zit). Het tweede databestand geeft per land aan naar welke acht Europese landen het meeste wordt geïmporteerd en geëxporteerd. Hierdoor kunnen de pijlen die de flow aangeven in één keer worden getekend. Als een land geselecteerd is en de exportflows ervan dus al worden weergegeven, kan er nog een keer worden geklikt waardoor de importflows weer worden gegeven. in dit databestand zitten dus voor elk jaar per land de acht landen waar een pijl naartoe moet. Als de slider wordt verschoven roept het programma de functie *drawBars(year)* aan en als er wordt geklikt de functies *drawArrows(country)* en *showGraph(country)*. 

De grafiek onder de kaart (die niet tot het *MVP* behoort) maakt ook gebruik van de eerste dataset en plot deze data voor één of meerdere landen tegelijkertijd in een grafiek. Zowel export en import worden geplot. Een SVG path is heel goed te gebruiken om dit te doen. In eerste instantie zal ik checkboxes maken. Pas als het genoemde op tijd klaar is, ga ik verder met drag and drop. 
